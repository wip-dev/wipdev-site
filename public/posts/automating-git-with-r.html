<!DOCTYPE html><html><head><link href="/styles.css" rel="stylesheet" /></head><body><article><h1>Automating Git With R</h1><p>Just like the <a href='/posts/automating-git-with-python.html'>Python script I wrote earlier</a>, I made a similar one in R to automate a simple sequence of Git commands. This post will also be quite similar in structure to that other post with the Python script.</p><h2>Context</h2><p>This blog is made with <a href='https://gohugo.io/'>Hugo</a>, and posts are written in Markdown format. The whole site is basically a Git repository that gets pushed to GitHub and is built and hosted on <a href='https://www.netlify.com/'>Netlify</a>. After writing every post, I write this series of Git commands:</p><ul><li><code>git add .</code> (it's only one new file added to the repo)</li><li><code>git commit -m &quot;my commit message&quot;</code></li><li><code>git push</code></li></ul><p>I automated these commands earlier using a Python script that can be executed from the command line like this:</p><pre><code class="bash">./the&#95;script.py &quot;my commit message&quot;
</code></pre><p>Now, I will show the code that does a simple functionality in R.</p><h2>The code</h2><pre><code class="r">#! /usr/bin/Rscript

library&#40;&quot;gert&quot;&#41;

args = commandArgs&#40;trailingOnly = TRUE&#41;

if &#40;length&#40;args&#41; == 0&#41; {
  cat&#40;&quot;No message given... exiting\n&quot;&#41;
  q&#40;&quot;no&quot;&#41;
}

if &#40;nrow&#40;git&#95;status&#40;&#41;&#41; == 0&#41; {
  cat&#40;&quot;Nothing to commit... exiting\n&quot;&#41;
  q&#40;&quot;no&quot;&#41;
} else {
  git&#95;add&#40;&quot;.&quot;&#41;
  git&#95;commit&#40;args&#91;1&#93;&#41;
  cat&#40;paste&#40;&quot;Successfully added&quot;, args&#91;1&#93;, &quot;\n&quot;&#41;&#41;
}

git&#95;pull&#40;&#41;
cat&#40;&quot;Successfully pulled!\n&quot;&#41;
git&#95;push&#40;&#41;
cat&#40;&quot;Successfully pushed!\n&quot;&#41;
</code></pre><p>The logic is almost identical, and you could work it out without having solid understanding of both languages. Although, if you examine the Python script, you will find that I didn't put any pull/push guards. This is because R's errors don't take up more than one line and are informative on their own, unlike Python's bulky tracebacks. (Or I'm rationalizing being lazy!)</p><p>The extra caveat in R is that (at least in Unix-like systems) the command <code>R</code> is not the one to use to run scripts from the command line. It's <code>Rscript</code>, which you should see in the "shebang" line at the top of the script.</p><h3>Assumptions</h3><p>Just like the Python script, this one works on a couple of assumptions that might make it a bit less useful for other programmers:</p><ul><li>The repo and its remote are already set up.</li><li>It commits all files (which is almost always one in my case).</li><li>It doesn't care about branches (I commit to and push the master branch).</li></ul><h2>Repos</h2><p>You can already see that the code is not too big, and I already pasted it here for reading convenience. I do have it on GitHub, though:</p><ul><li>R: <a href='https://github.com/waseem-medhat/git_doneR'>https://github.com/waseem-medhat/git&#95;doneR</a></li><li>Python: <a href='https://github.com/waseem-medhat/git_done'>https://github.com/waseem-medhat/git&#95;done</a><h2></h2></li></ul><p>That sums up my quick exercise of automating Git in R and making it an executable script to run from the command line.</p><p>Shout out to Zac Garland for telling me about the <code>gert</code> package.</p></article></body></html>