<!DOCTYPE html><html><head><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/hybrid.min.css" rel="stylesheet" /><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/clojure.min.js"></script><link href="/styles.css" rel="stylesheet" /><title>(wipdev-blog)</title></head><body><main><h1>Gotta Love/Hate Regex</h1><p>I remember once calling regular expressions "absolute magic". I do think it is powerful, but it kind of gets messy and unreadable when it gets bigger. In fact, one of those was the reason I wrote this post. It was in the NLTK book I am currently reading, and it was a little more complex than what I usually use in my code. So, here I am rambling about regex and trying to explain the one I studied today as an example.</p><h2>The goal</h2><p>That regex was supposed to to be used as a sort of word tokenizer on this example string:</p><pre><code>&quot;'When I'M a Duchess,' she said to herself, &#40;not in a very hopeful tone
though&#41;, 'I won't have any pepper in my kitchen AT ALL. Soup does very well
without--Maybe it's always pepper that makes people hot-tempered,'...&quot;
</code></pre><p>There is more to words than being a set of alphanumeric characters separated by whitespace. There is punctuation in the middle: hyphens, parentheses, full stops, etc., but not every punctuation symbol actually separates two words. You can see compound words (e.g. "hot-tempered") and punctuation without whitespace like the double-hyphen.</p><h2>The solution</h2><pre><code>&quot;\w+&#40;?:&#91;-'&#93;\w+&#41;&#42;|'|&#91;-.&#40;&#93;+|\S\w&#42;&quot;
</code></pre><p>I never wrote a regex this long before. So, looking at it, my brain's first response was "gobbledygook!" To be fair, though, this is relatively simple in the grand scheme of things: they can get <i>really</i> big. (<a href='https://stackoverflow.com/questions/201323/how-to-validate-an-email-address-using-a-regular-expression#201378'>See for yourself...</a>)</p><h2>Breaking it down</h2><p>Just like any programming problem, this one is better solved by breaking it down. I will split it by the <code>|</code> because it means "or", so the whole regex represent multiple choices, and we are trying to match <i>any</i> of them.</p><h3>Part 1: <code>\w+&#40;?:&#91;-'&#93;\w+&#41;&#42;</code></h3><ul><li>The first part is <code>\w+</code> which searches for a word (i.e. one or more  alphanumeric characters and/or underscores).</li><li>The pattern <code>&#40;?:&#95;&#95;&#95;&#41;</code> is for grouping a smaller regex. But what is the smaller  regex's job, and why is it grouped?</li><li>The smaller regex is <code>&#91;-'&#93;\w+</code> which matches a hyphen or an apostrophe, and  either is followed by a word. </li><li>The grouping is because this whole wrapped regex is followed by a <code>&#42;</code> which  means zero or more occurrences.</li></ul><p>So this part can be thought of as the main pattern. It covers most of the desired tokens including compound words that are separated with a hyphen (e.g. "hot-tempered") as well as those with apostrophes (e.g. "I'M").</p><h3>Part 2: <code>'</code></h3><p>The string of interest had quotes written between literal single quotes. So, we needed our pattern to cover those by, well... using a single quote.</p><h3>Part 3: <code>&#91;-.&#40;&#93;+</code></h3><ul><li>The square brackets <code>&#91;&#93;</code> with a set of characters inside of it means that <i>any</i>  of those characters should be matched.</li><li>Here it is followed by a <code>+</code> to indicate that one or more of those characters  should be matched.</li></ul><p>This part captures punctuation marks like parentheses, full stops, ellipses, and the double hyphen.</p><h3>Part 4: <code>\S\w&#42;</code></h3><p>The last part cleans up with some final touches. It searches for a non-whitespace character followed by 0 or more alphanumeric characters. Here it picks up two tokens that wouldn't be split otherwise: a comma and a closing parenthesis.</p><hr/><p>That's it! Although it is not the most complicated thing in the world, I still it proves the point I said at the beginning: regex can be messy but still really powerful!</p></main><script src="/main.js"></script></body></html>